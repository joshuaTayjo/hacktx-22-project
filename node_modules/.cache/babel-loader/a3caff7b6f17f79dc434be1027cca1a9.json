{"ast":null,"code":"import _objectSpread from\"/Users/joshmartinez/Desktop/hacktx-22-project/hacktx-22-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/joshmartinez/Desktop/hacktx-22-project/hacktx-22-project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _createForOfIteratorHelper from\"/Users/joshmartinez/Desktop/hacktx-22-project/hacktx-22-project/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"/Users/joshmartinez/Desktop/hacktx-22-project/hacktx-22-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import fs from'fs';var fileData=fs.readFileSync('data.json','utf8');var oldData=JSON.parse(fileData);export function byDomain(){return _byDomain.apply(this,arguments);}function _byDomain(){_byDomain=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var newData,_iterator,_step,_loop,data,_iterator2,_step2,domain,fullSize,openRate;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:newData={domains:[]};_iterator=_createForOfIteratorHelper(oldData.domains);try{_loop=function _loop(){var item=_step.value;var mainDomain=item.domain.split('.').slice(-2).join('.');if(!newData.domains.find(function(e){return e.domain===mainDomain;})){var newItem={domain:mainDomain,count:1,emails:[{openStatus:item.data.openStatus,size:item.data.size}]};newData.domains.push(newItem);}else{var index=newData.domains.findIndex(function(x){return x.domain===mainDomain;});newData.domains[index].count++;newData.domains[index].emails.push({openStatus:item.data.openStatus,size:item.data.size});}};for(_iterator.s();!(_step=_iterator.n()).done;){_loop();}}catch(err){_iterator.e(err);}finally{_iterator.f();}newData.domains.sort(function(a,b){return b.count-a.count;});newData.domains=newData.domains.slice(0,10);data={domains:[]};_iterator2=_createForOfIteratorHelper(newData.domains);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){domain=_step2.value;fullSize=domain.emails.reduce(function(a,b){return a+b.size;},0)/1000000;openRate=domain.emails.reduce(function(a,b){return a+b.openStatus;},0)/domain.emails.length*100;data.domains.push({domain:domain.domain,fullSize:fullSize.toFixed(2),openRate:openRate.toFixed(2),count:domain.count});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return _context.abrupt(\"return\",data);case 9:case\"end\":return _context.stop();}}},_callee);}));return _byDomain.apply(this,arguments);}export function byAuthor(){return _byAuthor.apply(this,arguments);}function _byAuthor(){_byAuthor=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var newData,_iterator3,_step3,_loop2,data,_iterator4,_step4,author,fullSize,openRate;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:newData={authors:[]};_iterator3=_createForOfIteratorHelper(oldData.domains);try{_loop2=function _loop2(){var item=_step3.value;var author=item.data.author.slice(item.data.author.indexOf('<')+1,item.data.author.indexOf('>'));if(!newData.authors.find(function(e){return e.author===author;})){var newItem={author:author,count:1,emails:[_objectSpread({domain:item.domain},item.data)]};newData.authors.push(newItem);}else{var index=newData.authors.findIndex(function(x){return x.author===author;});newData.authors[index].count++;newData.authors[index].emails.push(_objectSpread({domain:item.domain},item.data));}};for(_iterator3.s();!(_step3=_iterator3.n()).done;){_loop2();}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}newData.authors.sort(function(a,b){return b.count-a.count;});newData.authors=newData.authors.slice(0,10);data={authors:[]};_iterator4=_createForOfIteratorHelper(newData.authors);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){author=_step4.value;fullSize=author.emails.reduce(function(a,b){return a+b.size;},0)/1000000;openRate=author.emails.reduce(function(a,b){return a+b.openStatus;},0)/author.emails.length*100;data.authors.push({author:author.author,fullSize:fullSize.toFixed(2),openRate:openRate.toFixed(2),count:author.count});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return _context2.abrupt(\"return\",data);case 9:case\"end\":return _context2.stop();}}},_callee2);}));return _byAuthor.apply(this,arguments);}export function bySubDomain(){return _bySubDomain.apply(this,arguments);}function _bySubDomain(){_bySubDomain=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var newData,_iterator5,_step5,_loop3,data,_iterator6,_step6,subDomain,fullSize,openRate;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:newData={subDomains:[]};_iterator5=_createForOfIteratorHelper(oldData.domains);try{_loop3=function _loop3(){var item=_step5.value;var subDomain=item.domain;if(!newData.subDomains.find(function(e){return e.subDomain===subDomain;})){var newItem={subDomain:subDomain,count:1,emails:[_objectSpread({domain:item.domain},item.data)]};newData.subDomains.push(newItem);}else{var index=newData.subDomains.findIndex(function(x){return x.subDomain===subDomain;});newData.subDomains[index].count++;newData.subDomains[index].emails.push(_objectSpread({domain:item.domain},item.data));}};for(_iterator5.s();!(_step5=_iterator5.n()).done;){_loop3();}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}newData.subDomains.sort(function(a,b){return b.count-a.count;});newData.subDomains=newData.subDomains.slice(0,10);data={subDomains:[]};_iterator6=_createForOfIteratorHelper(newData.subDomains);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){subDomain=_step6.value;fullSize=subDomain.emails.reduce(function(a,b){return a+b.size;},0)/1000000;openRate=subDomain.emails.reduce(function(a,b){return a+b.openStatus;},0)/subDomain.emails.length*100;data.subDomains.push({subDomain:subDomain.subDomain,fullSize:fullSize.toFixed(2),openRate:openRate.toFixed(2),count:subDomain.count});}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}return _context3.abrupt(\"return\",data);case 9:case\"end\":return _context3.stop();}}},_callee3);}));return _bySubDomain.apply(this,arguments);}","map":{"version":3,"names":["fs","fileData","readFileSync","oldData","JSON","parse","byDomain","newData","domains","item","mainDomain","domain","split","slice","join","find","e","newItem","count","emails","openStatus","data","size","push","index","findIndex","x","sort","a","b","fullSize","reduce","openRate","length","toFixed","byAuthor","authors","author","indexOf","bySubDomain","subDomains","subDomain"],"sources":["/Users/joshmartinez/Desktop/hacktx-22-project/hacktx-22-project/src/api/dataTransform.js"],"sourcesContent":["import fs from 'fs';\n\nconst fileData = fs.readFileSync('data.json', 'utf8');\nconst oldData = JSON.parse(fileData);\n\nexport async function byDomain() {\n    const newData = {domains: []};\n\n    for (let item of oldData.domains) {\n        const mainDomain = item.domain.split('.').slice(-2).join('.');\n        if (!newData.domains.find(e => e.domain === mainDomain)) {\n            const newItem = {\n                domain: mainDomain,\n                count: 1,\n                emails: [{openStatus: item.data.openStatus, size: item.data.size}]\n            };\n            newData.domains.push(newItem);\n        } else {\n            const index = newData.domains.findIndex(x => x.domain === mainDomain);\n            newData.domains[index].count++;\n            newData.domains[index].emails.push({openStatus: item.data.openStatus, size: item.data.size});\n        }\n    }\n    newData.domains.sort((a, b) => b.count - a.count);\n    newData.domains = newData.domains.slice(0, 10);\n    const data = {domains: []};\n    for (let domain of newData.domains) {\n        const fullSize = domain.emails.reduce((a, b) => a + b.size, 0) / 1_000_000;\n        const openRate = domain.emails.reduce((a, b) => a + b.openStatus, 0) / domain.emails.length * 100;\n        data.domains.push({\n            domain: domain.domain, fullSize: fullSize.toFixed(2),\n            openRate: openRate.toFixed(2), count: domain.count\n        });\n    }\n    return data;\n}\n\nexport async function byAuthor() {\n    const newData = {authors: []};\n    for (let item of oldData.domains) {\n        const author = item.data.author.slice(item.data.author.indexOf('<') + 1, item.data.author.indexOf('>'));\n        if (!newData.authors.find(e => e.author === author)) {\n            const newItem = {author, count: 1, emails: [{domain: item.domain, ...item.data}]};\n            newData.authors.push(newItem);\n        } else {\n            const index = newData.authors.findIndex(x => x.author === author);\n            newData.authors[index].count++;\n            newData.authors[index].emails.push({domain: item.domain, ...item.data});\n        }\n    }\n    newData.authors.sort((a, b) => b.count - a.count);\n    newData.authors = newData.authors.slice(0, 10);\n    const data = {authors: []};\n    for (let author of newData.authors) {\n        const fullSize = author.emails.reduce((a, b) => a + b.size, 0) / 1_000_000;\n        const openRate = author.emails.reduce((a, b) => a + b.openStatus, 0) / author.emails.length * 100;\n        data.authors.push({\n            author: author.author, fullSize: fullSize.toFixed(2),\n            openRate: openRate.toFixed(2), count: author.count\n        });\n    }\n\n    return data;\n}\n\nexport async function bySubDomain() {\n    const newData = {subDomains: []};\n    for (let item of oldData.domains) {\n        const subDomain = item.domain\n        if (!newData.subDomains.find(e => e.subDomain === subDomain)) {\n            const newItem = {subDomain, count: 1, emails: [{domain: item.domain, ...item.data}]};\n            newData.subDomains.push(newItem);\n        } else {\n            const index = newData.subDomains.findIndex(x => x.subDomain === subDomain);\n            newData.subDomains[index].count++;\n            newData.subDomains[index].emails.push({domain: item.domain, ...item.data});\n        }\n    }\n    newData.subDomains.sort((a, b) => b.count - a.count);\n    newData.subDomains = newData.subDomains.slice(0, 10);\n    const data = {subDomains: []};\n    for (let subDomain of newData.subDomains) {\n\n        const fullSize = subDomain.emails.reduce((a, b) => a + b.size, 0) / 1_000_000;\n        const openRate = subDomain.emails.reduce((a, b) => a + b.openStatus, 0) / subDomain.emails.length * 100;\n        data.subDomains.push({\n            subDomain: subDomain.subDomain,\n            fullSize: fullSize.toFixed(2),\n            openRate: openRate.toFixed(2),\n            count: subDomain.count\n        })\n        ;\n    }\n\n    return data;\n\n}\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}